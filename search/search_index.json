{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#EffiBEM-Viewer","title":"EffiBEM Viewer","text":"<p>A 3D viewer for OpenStudio building energy models using GLTF and Three.js, that can create a standalone HTML page or be embedded into a Jupyter Notebook.</p> <p>A Jupyter Notebook Gltf_notebook.ipynb can serve as a small demonstration of the features.</p> <p></p> <ul> <li>Documentation: https://jmarrec.github.io/effibemviewer</li> <li>GitHub: https://github.com/jmarrec/effibemviewer</li> <li>PyPI: https://pypi.org/project/effibemviewer/</li> </ul> <p>This is free software (MIT License) contributed by EffiBEM.</p> <p>Leveraging software, EffiBEM specializes in providing new ways to streamline your workflows and create new tools that work with limited inputs for your specific applications. We also offer support and training services on BEM simulation engines (OpenStudio and EnergyPlus).</p>"},{"location":"api/","title":"API Reference","text":""},{"location":"api/#API-Reference","title":"API Reference","text":""},{"location":"api/#effibemviewer.gltf.create_example_model","title":"<code>create_example_model(include_geometry_diagnostics: bool = False) -&gt; openstudio.model.Model</code>","text":"<p>Create an example OpenStudio model with two stories and optionally geometry diagnostics.</p> <p>Parameters:</p> Name Type Description Default <code>include_geometry_diagnostics</code> <code>bool</code> <p>If True, will reverse a surface on purpose</p> <code>False</code> <p>Returns:</p> Name Type Description <code>model</code> <code>Model</code> <p>Example model</p> Source code in <code>effibemviewer/gltf.py</code> <pre><code>def create_example_model(include_geometry_diagnostics: bool = False) -&gt; openstudio.model.Model:\n    \"\"\"Create an example OpenStudio model with two stories and optionally geometry diagnostics.\n\n    Args:\n        include_geometry_diagnostics: If True, will reverse a surface on purpose\n\n    Returns:\n        model (openstudio.model.Model): Example model\n    \"\"\"\n    model = openstudio.model.exampleModel()\n    space = model.getSpaceByName(\"Space 1\").get()\n    # Move space type assignment from Building to Space, so I can have one without it\n    space_type = space.spaceType().get()\n    [space.setSpaceType(space_type) for space in model.getSpaces()]\n    b = model.getBuilding()\n    b.setNorthAxis(45)\n    b.resetSpaceType()\n\n    space_clone = space.clone(model).to_Space().get()\n    space_clone.setName(\"Space Level 2\")\n    space_clone.resetSpaceType()\n    # Set it above the original space for better viewing\n    z = space.boundingBox().maxZ().get()\n    assert z == 3.0\n    space_clone.setZOrigin(z)\n    story2 = openstudio.model.BuildingStory(model)\n    story2.setName(\"Second Story\")\n    story2.setNominalZCoordinate(z)\n    story2.setNominalFloortoFloorHeight(z)\n    space_clone.setBuildingStory(story2)\n\n    if include_geometry_diagnostics:\n        surface = next(s for s in space_clone.surfaces() if s.surfaceType() == \"Wall\")\n        # Make one surface incorrectly oriented\n        surface.setVertices(openstudio.reverse(surface.vertices()))\n\n    return model\n</code></pre>"},{"location":"api/#effibemviewer.gltf.display_model","title":"<code>display_model(model: openstudio.model.Model, height: str = '500px', use_iframe: bool = False, include_geometry_diagnostics: bool = False, cdn: bool = False) -&gt; HTML | IFrame</code>","text":"<p>Display an OpenStudio model in a Jupyter notebook.</p> <p>Parameters:</p> Name Type Description Default <code>model</code> <code>Model</code> <p>OpenStudio model to render</p> required <code>height</code> <code>str</code> <p>CSS height value (default \"500px\")</p> <code>'500px'</code> <code>use_iframe</code> <code>bool</code> <p>If True, use IFrame for nbclassic compatibility</p> <code>False</code> <code>include_geometry_diagnostics</code> <code>bool</code> <p>If True, include geometry diagnostic info</p> <code>False</code> <code>cdn</code> <code>bool</code> <p>If True, load JS/CSS from CDN (better caching on re-runs)</p> <code>False</code> <p>Returns:</p> Type Description <code>HTML | IFrame</code> <p>IPython display object (HTML or IFrame)</p> Source code in <code>effibemviewer/gltf.py</code> <pre><code>def display_model(\n    model: openstudio.model.Model,\n    height: str = \"500px\",\n    use_iframe: bool = False,\n    include_geometry_diagnostics: bool = False,\n    cdn: bool = False,\n) -&gt; HTML | IFrame:\n    \"\"\"Display an OpenStudio model in a Jupyter notebook.\n\n    Args:\n        model: OpenStudio model to render\n        height: CSS height value (default \"500px\")\n        use_iframe: If True, use IFrame for nbclassic compatibility\n        include_geometry_diagnostics: If True, include geometry diagnostic info\n        cdn: If True, load JS/CSS from CDN (better caching on re-runs)\n\n    Returns:\n        IPython display object (HTML or IFrame)\n    \"\"\"\n    fragment = model_to_gltf_html(\n        model=model,\n        height=height,\n        pretty_json=False,\n        include_geometry_diagnostics=include_geometry_diagnostics,\n        embedded=True,\n        loader_mode=False,\n        script_only=True,\n        cdn=cdn,\n    )\n    if not use_iframe:\n        from IPython.display import HTML\n\n        return HTML(fragment)\n\n    import base64\n    import datetime\n\n    from IPython.display import IFrame\n\n    current_year = datetime.datetime.now().year\n    footer = f\"\"\"&lt;p&gt;\n      Copyright &amp;copy; 2026 - {current_year} &lt;a href=\"https://effibem.com\" target=\"_blank\"&gt;EffiBEM EURL&lt;/a&gt;\n    &lt;/p&gt;\"\"\"\n    full_html = f\"\"\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n  &lt;/head&gt;\n  &lt;body style='margin:0'&gt;\n{fragment}\n\n  &lt;footer&gt;\n    {footer}\n  &lt;/footer&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\"\"\"\n    data_url = f\"data:text/html;base64,{base64.b64encode(full_html.encode()).decode()}\"\n    # Parse height for IFrame (needs integer pixels)\n    h = int(height.replace(\"px\", \"\")) if height.endswith(\"px\") else 500\n    return IFrame(src=data_url, width=\"100%\", height=h)\n</code></pre>"},{"location":"api/#effibemviewer.gltf.generate_loader_html","title":"<code>generate_loader_html(height: str = '100vh', include_geometry_diagnostics: bool = False, embedded: bool = True, cdn: bool = False, script_only: bool = False) -&gt; str</code>","text":"<p>Generate a standalone HTML page with a file input for loading GLTF files.</p> <p>Parameters:</p> Name Type Description Default <code>height</code> <code>str</code> <p>CSS height value (default \"100vh\" for full viewport)</p> <code>'100vh'</code> <code>include_geometry_diagnostics</code> <code>bool</code> <p>If True, enable geometry diagnostic display</p> <code>False</code> <code>embedded</code> <code>bool</code> <p>If True, inline the JS library. If False, reference external JS file.</p> <code>True</code> <code>cdn</code> <code>bool</code> <p>If True, reference JS/CSS from jsDelivr CDN (overrides embedded)</p> <code>False</code> <code>script_only</code> <code>bool</code> <p>If True, generate only the script fragment (used in gh-pages only)</p> <code>False</code> Source code in <code>effibemviewer/gltf.py</code> <pre><code>def generate_loader_html(\n    height: str = \"100vh\",\n    include_geometry_diagnostics: bool = False,\n    embedded: bool = True,\n    cdn: bool = False,\n    script_only: bool = False,\n) -&gt; str:\n    \"\"\"Generate a standalone HTML page with a file input for loading GLTF files.\n\n    Args:\n        height: CSS height value (default \"100vh\" for full viewport)\n        include_geometry_diagnostics: If True, enable geometry diagnostic display\n        embedded: If True, inline the JS library. If False, reference external JS file.\n        cdn: If True, reference JS/CSS from jsDelivr CDN (overrides embedded)\n        script_only: If True, generate only the script fragment (used in gh-pages only)\n    Returns:\n        str: Full HTML page with file input for loading GLTF files\n    \"\"\"\n    template = env.get_template(\"effibemviewer.html.j2\")\n\n    html = template.render(\n        height=height,\n        gltf_data=None,\n        indent=None,\n        include_geometry_diagnostics=include_geometry_diagnostics,\n        embedded=embedded,\n        loader_mode=True,\n        script_only=script_only,\n        cdn_base_url=CDN_BASE_URL if cdn else None,\n    )\n    return html\n</code></pre>"},{"location":"api/#effibemviewer.gltf.get_css_library","title":"<code>get_css_library(height: str = '100vh') -&gt; str</code>","text":"<p>Get the EffiBEMViewer CSS library content.</p> <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>The CSS library content</p> Source code in <code>effibemviewer/gltf.py</code> <pre><code>def get_css_library(height: str = \"100vh\") -&gt; str:\n    \"\"\"Get the EffiBEMViewer CSS library content.\n\n    Returns:\n        str: The CSS library content\n    \"\"\"\n    template = env.get_template(\"effibemviewer.css.j2\")\n    return template.render(height=height)\n</code></pre>"},{"location":"api/#effibemviewer.gltf.get_js_library","title":"<code>get_js_library() -&gt; str</code>","text":"<p>Get the EffiBEMViewer JavaScript library content.</p> <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>The JavaScript library content (uses bare specifiers, requires importmap)</p> Source code in <code>effibemviewer/gltf.py</code> <pre><code>def get_js_library() -&gt; str:\n    \"\"\"Get the EffiBEMViewer JavaScript library content.\n\n    Returns:\n        str: The JavaScript library content (uses bare specifiers, requires importmap)\n    \"\"\"\n    template = env.get_template(\"effibemviewer.js.j2\")\n    return template.render()\n</code></pre>"},{"location":"api/#effibemviewer.gltf.model_to_gltf_html","title":"<code>model_to_gltf_html(model: openstudio.model.Model, height: str = '100vh', pretty_json: bool = False, include_geometry_diagnostics: bool = False, embedded: bool = True, loader_mode: bool = False, script_only: bool = False, cdn: bool = False) -&gt; str</code>","text":"<p>Generate a full standalone HTML page for viewing an OpenStudio model.</p> <p>Parameters:</p> Name Type Description Default <code>model</code> <code>Model</code> <p>OpenStudio model to render</p> required <code>height</code> <code>str</code> <p>CSS height value (default \"100vh\" for full viewport)</p> <code>'100vh'</code> <code>pretty_json</code> <code>bool</code> <p>If True, format JSON with indentation</p> <code>False</code> <code>include_geometry_diagnostics</code> <code>bool</code> <p>If True, include geometry diagnostic info</p> <code>False</code> <code>embedded</code> <code>bool</code> <p>If True, inline the JS library. If False, reference external JS file.</p> <code>True</code> <code>loader_mode</code> <code>bool</code> <p>If True, generate file-input loader instead of embedding model data</p> <code>False</code> <code>script_only</code> <code>bool</code> <p>If True, generate only the script fragment (for Jupyter)</p> <code>False</code> <code>cdn</code> <code>bool</code> <p>If True, reference JS/CSS from jsDelivr CDN (overrides embedded)</p> <code>False</code> Source code in <code>effibemviewer/gltf.py</code> <pre><code>def model_to_gltf_html(\n    model: openstudio.model.Model,\n    height: str = \"100vh\",\n    pretty_json: bool = False,\n    include_geometry_diagnostics: bool = False,\n    embedded: bool = True,\n    loader_mode: bool = False,\n    script_only: bool = False,\n    cdn: bool = False,\n) -&gt; str:\n    \"\"\"Generate a full standalone HTML page for viewing an OpenStudio model.\n\n    Args:\n        model: OpenStudio model to render\n        height: CSS height value (default \"100vh\" for full viewport)\n        pretty_json: If True, format JSON with indentation\n        include_geometry_diagnostics: If True, include geometry diagnostic info\n        embedded: If True, inline the JS library. If False, reference external JS file.\n        loader_mode: If True, generate file-input loader instead of embedding model data\n        script_only: If True, generate only the script fragment (for Jupyter)\n        cdn: If True, reference JS/CSS from jsDelivr CDN (overrides embedded)\n    \"\"\"\n    data = model_to_gltf_json(model=model, include_geometry_diagnostics=include_geometry_diagnostics)\n\n    template = env.get_template(\"effibemviewer.html.j2\")\n    indent = 2 if pretty_json else None\n\n    return template.render(\n        height=height,\n        gltf_data=data,\n        indent=indent,\n        include_geometry_diagnostics=include_geometry_diagnostics,\n        embedded=embedded,\n        loader_mode=loader_mode,\n        script_only=script_only,\n        cdn_base_url=CDN_BASE_URL if cdn else None,\n    )\n</code></pre>"},{"location":"api/#effibemviewer.gltf.model_to_gltf_json","title":"<code>model_to_gltf_json(model: openstudio.model.Model, include_geometry_diagnostics: bool = False) -&gt; dict</code>","text":"<p>Convert an OpenStudio model to GLTF JSON format (dict).</p> <p>Parameters:</p> Name Type Description Default <code>model</code> <code>Model</code> <p>OpenStudio model to convert</p> required <code>include_geometry_diagnostics</code> <code>bool</code> <p>If True, include geometry diagnostic info in the output</p> <code>False</code> <p>Returns:</p> Name Type Description <code>dict</code> <code>dict</code> <p>GLTF JSON data representing the model</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If geometry diagnostics are requested but not supported by the OpenStudio version</p> Source code in <code>effibemviewer/gltf.py</code> <pre><code>def model_to_gltf_json(model: openstudio.model.Model, include_geometry_diagnostics: bool = False) -&gt; dict:\n    \"\"\"Convert an OpenStudio model to GLTF JSON format (dict).\n\n    Args:\n        model: OpenStudio model to convert\n        include_geometry_diagnostics: If True, include geometry diagnostic info in the output\n\n    Returns:\n        dict: GLTF JSON data representing the model\n\n    Raises:\n        ValueError: If geometry diagnostics are requested but not supported by the OpenStudio version\n    \"\"\"\n    ft = openstudio.gltf.GltfForwardTranslator()\n    if include_geometry_diagnostics:\n        if not callable(getattr(openstudio.gltf.GltfForwardTranslator, \"setIncludeGeometryDiagnostics\", None)):\n            raise ValueError(\n                \"Geometry diagnostics not supported in this version of OpenStudio. Please update to use this feature.\"\n            )\n        ft.setIncludeGeometryDiagnostics(True)\n    return ft.modelToGLTFJSON(model)\n</code></pre>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#Changelog","title":"Changelog","text":"<p>All notable changes to this project will be documented in this file.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"changelog/#Unreleased","title":"Unreleased","text":""},{"location":"changelog/#031---2026-02-10","title":"[0.3.1] - 2026-02-10","text":""},{"location":"changelog/#Added","title":"Added","text":""},{"location":"changelog/#Changed","title":"Changed","text":"<ul> <li>Minor tweak to online loader height (80vh)</li> </ul>"},{"location":"changelog/#030---2026-02-10","title":"0.3.0 - 2026-02-10","text":""},{"location":"changelog/#Added_1","title":"Added","text":"<ul> <li>Minified JS/CSS distribution (<code>effibemviewer.min.js</code>, <code>effibemviewer.min.css</code>) via terser and csso-cli</li> <li>Added an Online Loader page to the gh-pages website</li> </ul>"},{"location":"changelog/#Changed_1","title":"Changed","text":"<ul> <li>Jinja2 environment now uses <code>trim_blocks</code>, <code>lstrip_blocks</code>, and <code>keep_trailing_newline</code> for cleaner HTML output</li> <li>Removed unused <code>gltf_viewer</code> module</li> </ul>"},{"location":"changelog/#023---2026-02-10","title":"0.2.3 - 2026-02-10","text":""},{"location":"changelog/#Changed_2","title":"Changed","text":"<ul> <li>Move standalone viewer css for header/footer into the HTML template, not the effibemviewer.css</li> </ul>"},{"location":"changelog/#022---2026-02-05","title":"0.2.2 - 2026-02-05","text":""},{"location":"changelog/#Changed_3","title":"Changed","text":"<ul> <li>Forgot to rerun <code>make dist</code></li> </ul>"},{"location":"changelog/#021---2026-02-05","title":"0.2.1 - 2026-02-05","text":""},{"location":"changelog/#Added_2","title":"Added","text":"<ul> <li><code>cdn</code> parameter to <code>display_model()</code> for better browser caching on notebook re-runs</li> <li>JavaScript library documentation page (<code>docs/javascript.md</code>)</li> </ul>"},{"location":"changelog/#Changed_4","title":"Changed","text":"<ul> <li>Expanded CLI documentation with all options (<code>--embedded</code>, <code>--cdn</code>, <code>--loader</code>)</li> </ul>"},{"location":"changelog/#Fixed","title":"Fixed","text":"<ul> <li>Viewer height not being respected when using CDN mode (now uses inline style)</li> </ul>"},{"location":"changelog/#020---2026-02-05","title":"0.2.0 - 2026-02-05","text":""},{"location":"changelog/#Added_3","title":"Added","text":"<ul> <li>Reusable <code>EffiBEMViewer</code> JavaScript class with public API</li> <li><code>runFromJSON()</code>, <code>runFromFile()</code>, <code>runFromFileObject()</code> convenience functions</li> <li><code>--loader</code> CLI mode to generate file-input HTML for loading local GLTF files</li> <li><code>--embedded</code> CLI flag to inline JS/CSS vs external files</li> <li>Header with EffiBEM logo</li> <li>CDN-ready distribution in <code>public/</code> folder (embedded and cdn variants)</li> <li>Pre-commit hook to auto-rebuild dist when templates change</li> </ul>"},{"location":"changelog/#Changed_5","title":"Changed","text":"<ul> <li>Upgraded Three.js from 0.160 to 0.182</li> <li>Switched CDN from unpkg to jsDelivr</li> <li>Refactored templates into separate JS and CSS files</li> </ul>"},{"location":"changelog/#012---2026-02-05","title":"0.1.2 - 2026-02-05","text":"<ul> <li>docs update</li> </ul>"},{"location":"changelog/#011---2026-02-05","title":"0.1.1 - 2026-02-05","text":"<ul> <li>Readme update</li> </ul>"},{"location":"changelog/#010---2026-02-05","title":"0.1.0 - 2026-02-05","text":""},{"location":"changelog/#Added_4","title":"Added","text":"<ul> <li>Initial release</li> <li>3D GLTF viewer for OpenStudio models using Three.js</li> <li>Jupyter notebook integration with <code>display_model()</code></li> <li>Surface filters (floors, walls, roofs, windows, doors, shading, partitions)</li> <li>Render by: Surface Type, Boundary, Construction, Thermal Zone, Space Type, Building Story</li> <li>Show Story filter</li> <li>Geometry diagnostics support (convex, correctly oriented, space convex, space enclosed)</li> <li>Click-to-select with info panel</li> <li>Edge/wireframe rendering</li> <li>Back face coloring for orientation detection</li> <li>X, Y, Z axes display</li> </ul>"},{"location":"contributing/","title":"Contributing","text":""},{"location":"contributing/#Contributing","title":"Contributing","text":"<p>Contributions are welcome, and they are greatly appreciated! Every little bit helps, and credit will always be given.</p>"},{"location":"contributing/#Types-of-Contributions","title":"Types of Contributions","text":""},{"location":"contributing/#Report-Bugs","title":"Report Bugs","text":"<p>Report bugs at https://github.com/jmarrec/effibemviewer/issues.</p> <p>If you are reporting a bug, please include:</p> <ul> <li>Your operating system name and version.</li> <li>Any details about your local setup that might be helpful in troubleshooting.</li> <li>Detailed steps to reproduce the bug.</li> </ul>"},{"location":"contributing/#Fix-Bugs","title":"Fix Bugs","text":"<p>Look through the GitHub issues for bugs. Anything tagged with \"bug\" and \"help wanted\" is open to whoever wants to implement it.</p>"},{"location":"contributing/#Implement-Features","title":"Implement Features","text":"<p>Look through the GitHub issues for features. Anything tagged with \"enhancement\" and \"help wanted\" is open to whoever wants to implement it.</p>"},{"location":"contributing/#Write-Documentation","title":"Write Documentation","text":"<p>EffiBEM Viewer could always use more documentation, whether as part of the official docs, in docstrings, or even on the web in blog posts, articles, and such.</p>"},{"location":"contributing/#Submit-Feedback","title":"Submit Feedback","text":"<p>The best way to send feedback is to file an issue at https://github.com/jmarrec/effibemviewer/issues.</p> <p>If you are proposing a feature:</p> <ul> <li>Explain in detail how it would work.</li> <li>Keep the scope as narrow as possible, to make it easier to implement.</li> <li>Remember that this is a volunteer-driven project, and that contributions   are welcome :)</li> </ul>"},{"location":"contributing/#Get-Started","title":"Get Started!","text":"<p>Ready to contribute? Here's how to set up <code>effibemviewer</code> for local development.</p> <ol> <li>Fork the <code>effibemviewer</code> repo on GitHub.</li> <li> <p>Clone your fork locally:</p> <pre><code>$ git clone git@github.com:your_name_here/effibemviewer.git\n</code></pre> </li> <li> <p>Install your local copy using poetry:</p> <pre><code>$ cd effibemviewer/\n$ poetry install\n</code></pre> </li> <li> <p>Create a branch for local development:</p> <pre><code>$ git checkout -b name-of-your-bugfix-or-feature\n</code></pre> </li> </ol> <p>Now you can make your changes locally.</p> <ol> <li> <p>When you're done making changes, check that your changes pass the tests:</p> <pre><code>$ poetry run pytest\n</code></pre> </li> <li> <p>Commit your changes and push your branch to GitHub:</p> <pre><code>$ git add .\n$ git commit -m \"Your detailed description of your changes.\"\n$ git push origin name-of-your-bugfix-or-feature\n</code></pre> </li> <li> <p>Submit a pull request through the GitHub website.</p> </li> </ol>"},{"location":"contributing/#Pull-Request-Guidelines","title":"Pull Request Guidelines","text":"<p>Before you submit a pull request, check that it meets these guidelines:</p> <ol> <li>The pull request should include tests.</li> <li>If the pull request adds functionality, the docs should be updated.</li> <li>The pull request should work for Python 3.10, 3.11, and 3.12.</li> </ol>"},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#Installation","title":"Installation","text":""},{"location":"installation/#Stable-release","title":"Stable release","text":"<p>To install EffiBEM Viewer, run this command in your terminal:</p> <pre><code>$ pip install effibemviewer\n</code></pre> <p>This is the preferred method to install EffiBEM Viewer, as it will always install the most recent stable release.</p> <p>If you don't have pip installed, this Python installation guide can guide you through the process.</p>"},{"location":"installation/#From-source","title":"From source","text":"<p>The source for EffiBEM Viewer can be downloaded from the Github repo.</p> <p>You can either clone the public repository:</p> <pre><code>$ git clone git://github.com/jmarrec/effibemviewer\n</code></pre> <p>Or download the tarball:</p> <pre><code>$ curl -OJL https://github.com/jmarrec/effibemviewer/tarball/master\n</code></pre> <p>Once you have a copy of the source, you can install it with:</p> <pre><code>$ pip install .\n</code></pre>"},{"location":"javascript/","title":"JavaScript Library","text":""},{"location":"javascript/#JavaScript-Library","title":"JavaScript Library","text":"<p>The EffiBEM Viewer is available as a JavaScript library that you can use directly in web pages without Python. This is useful for integrating the viewer into existing web applications or for loading GLTF models dynamically.</p>"},{"location":"javascript/#Quick-Start-with-CDN","title":"Quick Start with CDN","text":"<p>The easiest way to use the viewer is via the jsDelivr CDN:</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/jmarrec/effibemviewer@v0.3.1/public/cdn/effibemviewer.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;div id=\"viewer\" class=\"effibem-viewer\"&gt;\n    &lt;!-- Controls and info panel will be populated by the viewer --&gt;\n  &lt;/div&gt;\n\n  &lt;script type=\"importmap\"&gt;\n  {\n    \"imports\": {\n      \"three\": \"https://cdn.jsdelivr.net/npm/three@0.182.0/build/three.module.js\",\n      \"three/addons/\": \"https://cdn.jsdelivr.net/npm/three@0.182.0/examples/jsm/\"\n    }\n  }\n  &lt;/script&gt;\n  &lt;script type=\"module\" src=\"https://cdn.jsdelivr.net/gh/jmarrec/effibemviewer@v0.3.1/public/cdn/effibemviewer.js\"&gt;&lt;/script&gt;\n  &lt;script type=\"module\"&gt;\n    // Load a GLTF file\n    runFromFile('./model.gltf');\n  &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>Tip</p> <p>Replace <code>@v0.3.1</code> with the version you want to use. Check the releases page for available versions.</p>"},{"location":"javascript/#Global-Functions","title":"Global Functions","text":"<p>Three convenience functions are exposed globally:</p>"},{"location":"javascript/#runFromJSONgltfData-options","title":"<code>runFromJSON(gltfData, options)</code>","text":"<p>Load a model from a GLTF JSON object:</p> <pre><code>fetch('./model.gltf')\n  .then(r =&gt; r.json())\n  .then(data =&gt; runFromJSON(data, { includeGeometryDiagnostics: true }));\n</code></pre>"},{"location":"javascript/#runFromFileurl-options","title":"<code>runFromFile(url, options)</code>","text":"<p>Load a model from a URL:</p> <pre><code>runFromFile('./model.gltf', { includeGeometryDiagnostics: true });\n</code></pre> <p>Warning</p> <p>Loading from file:// URLs won't work due to CORS. Use a local HTTP server for development.</p>"},{"location":"javascript/#runFromFileObjectfile-options","title":"<code>runFromFileObject(file, options)</code>","text":"<p>Load a model from a File object (e.g., from <code>&lt;input type=\"file\"&gt;</code>):</p> <pre><code>document.getElementById('fileInput').addEventListener('change', (e) =&gt; {\n  const file = e.target.files[0];\n  if (file) {\n    runFromFileObject(file);\n  }\n});\n</code></pre>"},{"location":"javascript/#Options","title":"Options","text":"<p>All functions accept an options object:</p> Option Type Default Description <code>containerId</code> <code>string</code> <code>'viewer'</code> ID of the container element <code>includeGeometryDiagnostics</code> <code>boolean</code> <code>false</code> Show geometry diagnostic controls"},{"location":"javascript/#EffiBEMViewer-Class","title":"EffiBEMViewer Class","text":"<p>For more control, use the <code>EffiBEMViewer</code> class directly:</p> <pre><code>// Create a viewer instance\nconst viewer = new EffiBEMViewer('my-container', {\n  includeGeometryDiagnostics: true\n});\n\n// Load a model (choose one method)\nviewer.loadFromJSON(gltfData);\n// or\nawait viewer.loadFromFile('./model.gltf');\n// or\nawait viewer.loadFromFileObject(file);\n</code></pre>"},{"location":"javascript/#Accessing-Threejs-Objects","title":"Accessing Three.js Objects","text":"<p>The viewer exposes the underlying Three.js objects for advanced customization:</p> <pre><code>const viewer = new EffiBEMViewer('viewer');\nawait viewer.loadFromFile('./model.gltf');\n\n// Access Three.js objects\nconsole.log(viewer.scene);         // THREE.Scene\nconsole.log(viewer.camera);        // THREE.PerspectiveCamera\nconsole.log(viewer.renderer);      // THREE.WebGLRenderer\nconsole.log(viewer.orbitControls); // OrbitControls\n</code></pre>"},{"location":"javascript/#Required-HTML-Structure","title":"Required HTML Structure","text":"<p>The viewer expects a container with specific child elements for controls and the info panel. The easiest way to get the correct structure is to generate it using the Python CLI:</p> <pre><code>$ python -m effibemviewer --loader --cdn --output viewer.html\n</code></pre> <p>Then customize the generated HTML as needed.</p>"},{"location":"javascript/#Minimal-Structure","title":"Minimal Structure","text":"<p>At minimum, you need:</p> <pre><code>&lt;div id=\"viewer\" class=\"effibem-viewer\"&gt;\n  &lt;div class=\"controls\"&gt;\n    &lt;!-- Control elements with specific classes --&gt;\n    &lt;select class=\"renderBy\"&gt;...&lt;/select&gt;\n    &lt;select class=\"showStory\"&gt;...&lt;/select&gt;\n    &lt;input type=\"checkbox\" class=\"showFloors\" checked&gt;\n    &lt;!-- etc. --&gt;\n  &lt;/div&gt;\n  &lt;div class=\"info-panel\"&gt;\n    &lt;!-- Info display elements --&gt;\n    &lt;h4 class=\"info-name\"&gt;&lt;/h4&gt;\n    &lt;span class=\"info-type\"&gt;&lt;/span&gt;\n    &lt;!-- etc. --&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>The viewer uses class-based selectors (e.g., <code>.showFloors</code>, <code>.renderBy</code>) rather than IDs, allowing multiple viewers on the same page.</p>"},{"location":"javascript/#File-Input-Example","title":"File Input Example","text":"<p>A complete example with file input for loading local GLTF files:</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;EffiBEM Viewer&lt;/title&gt;\n  &lt;link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/jmarrec/effibemviewer@v0.3.1/public/cdn/effibemviewer.css\"&gt;\n  &lt;style&gt;\n    .loader { padding: 20px; text-align: center; }\n    .loader.hidden { display: none; }\n  &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;div id=\"loaderPrompt\" class=\"loader\"&gt;\n    &lt;h2&gt;EffiBEM Viewer&lt;/h2&gt;\n    &lt;p&gt;Select an OpenStudio GLTF file to visualize&lt;/p&gt;\n    &lt;input type=\"file\" id=\"fileInput\" accept=\".gltf,.json\"&gt;\n  &lt;/div&gt;\n\n  &lt;div id=\"viewer\" class=\"effibem-viewer\"&gt;\n    &lt;!-- Full control structure here - generate with CLI --&gt;\n  &lt;/div&gt;\n\n  &lt;script type=\"importmap\"&gt;\n  {\n    \"imports\": {\n      \"three\": \"https://cdn.jsdelivr.net/npm/three@0.182.0/build/three.module.js\",\n      \"three/addons/\": \"https://cdn.jsdelivr.net/npm/three@0.182.0/examples/jsm/\"\n    }\n  }\n  &lt;/script&gt;\n  &lt;script type=\"module\" src=\"https://cdn.jsdelivr.net/gh/jmarrec/effibemviewer@v0.3.1/public/cdn/effibemviewer.js\"&gt;&lt;/script&gt;\n  &lt;script type=\"module\"&gt;\n    const viewer = new EffiBEMViewer('viewer');\n\n    document.getElementById('fileInput').addEventListener('change', (e) =&gt; {\n      const file = e.target.files[0];\n      if (file) {\n        document.getElementById('loaderPrompt').classList.add('hidden');\n        viewer.loadFromFileObject(file);\n      }\n    });\n  &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"javascript/#Self-Hosting","title":"Self-Hosting","text":"<p>Instead of using the CDN, you can self-host the library files. Generate them with the CLI:</p> <pre><code>$ python -m effibemviewer --loader --output viewer.html\n# Creates: viewer.html, effibemviewer.js, effibemviewer.css\n</code></pre> <p>Then reference the local files in your HTML:</p> <pre><code>&lt;link rel=\"stylesheet\" href=\"./effibemviewer.css\"&gt;\n&lt;script type=\"module\" src=\"./effibemviewer.js\"&gt;&lt;/script&gt;\n</code></pre>"},{"location":"online-loader/","title":"Online Loader","text":"EffiBEM Viewer <p>Select an OpenStudio GLTF file to visualize</p> Render By Surface Type Boundary Construction Thermal Zone Space Type Building Story Show Story All Stories Surface Filters  Floors  Walls  Roofs/Ceilings  Windows  Doors  Shading  Partitions  Show Edges Geometry Diagnostics  Non-Convex Surfaces Only  Incorrectly Oriented Only  Non-Convex Spaces Only  Non-Enclosed Spaces Only Surface Type: Space: Space Type: Thermal Zone: Building Story: Construction: Boundary: Adjacent To: Sun Exposure: Wind Exposure: Convex: Correctly Oriented: Space Convex: Space Enclosed:"},{"location":"usage/","title":"Usage","text":""},{"location":"usage/#Usage","title":"Usage","text":""},{"location":"usage/#In-a-Jupyter-Notebook","title":"In a Jupyter Notebook","text":"<p>To display an OpenStudio model in a Jupyter notebook:</p> <pre><code>import openstudio\nfrom effibemviewer import create_example_model, display_model\n\n# model = openstudio.model.exampleModel()\n# This helper creates a model with an incorrectly oriented surface and two stories\nmodel = create_example_model(include_geometry_diagnostics=True)\ndisplay_model(\n    model=model,\n    height=\"500px\",\n    use_iframe=False,\n    include_geometry_diagnostics=False,\n    cdn=False,  # Set to True for better caching on re-runs\n)\n</code></pre> <p>Parameters:</p> Parameter Type Default Description <code>model</code> <code>openstudio.model.Model</code> required The OpenStudio model to display <code>height</code> <code>str</code> <code>\"500px\"</code> CSS height value for the viewer <code>use_iframe</code> <code>bool</code> <code>False</code> Use IFrame for nbclassic compatibility <code>include_geometry_diagnostics</code> <code>bool</code> <code>False</code> Show geometry diagnostic controls <code>cdn</code> <code>bool</code> <code>False</code> Load JS/CSS from CDN (better caching on re-runs) <p>Note</p> <p><code>use_iframe=True</code> is only needed if you are using <code>jupyter nbclassic</code> (not <code>notebook</code> V7 or <code>lab</code>)</p> <p>Note</p> <p>OpenStudio, as of 3.11.0, does NOT export geometry diagnostics in GLTF. This feature requires a patched version.</p>"},{"location":"usage/#Generate-Standalone-HTML","title":"Generate Standalone HTML","text":"<p>To generate a standalone HTML file programmatically:</p> <pre><code>from effibemviewer import model_to_gltf_html\nfrom pathlib import Path\n\nhtml = model_to_gltf_html(model)\nPath(\"viewer.html\").write_text(html)\n</code></pre> <p>Parameters:</p> Parameter Type Default Description <code>model</code> <code>openstudio.model.Model</code> required The OpenStudio model to render <code>height</code> <code>str</code> <code>\"100vh\"</code> CSS height value <code>pretty_json</code> <code>bool</code> <code>False</code> Format JSON with indentation <code>include_geometry_diagnostics</code> <code>bool</code> <code>False</code> Include geometry diagnostic info <code>embedded</code> <code>bool</code> <code>True</code> Inline JS/CSS in HTML <code>cdn</code> <code>bool</code> <code>False</code> Reference JS/CSS from jsDelivr CDN"},{"location":"usage/#Command-Line-Interface","title":"Command Line Interface","text":"<p>Generate an HTML viewer from the command line:</p> <pre><code>usage: python -m effibemviewer [-h] [-m MODEL] [-g] [-o OUTPUT]\n                               [--embedded | --cdn] [--pretty] [--loader]\n\nGenerate GLTF viewer HTML from OpenStudio model\n\noptions:\n  -h, --help            show this help message and exit\n  -m MODEL, --model MODEL\n                        Path to the OpenStudio model file (optional, defaults\n                        to an example model)\n  -g, --geometry-diagnostics\n                        Include geometry diagnostics (convex, correctly\n                        oriented, etc.)\n  -o OUTPUT, --output OUTPUT\n                        Output HTML file path (default: viewer.html)\n  --embedded            Embed JS library inline in HTML (default: generate\n                        separate effibemviewer.js file)\n  --cdn                 Reference JS library from CDN instead of embedding or\n                        generating local file\n  --pretty              Pretty-print the JSON output in the HTML (default:\n                        compact JSON)\n  --loader              Generate a loader HTML with file input instead of\n                        embedding model data\n</code></pre>"},{"location":"usage/#Basic-Usage","title":"Basic Usage","text":"<p>Generate a viewer with an OpenStudio model:</p> <pre><code>$ python -m effibemviewer --model mymodel.osm --output viewer.html\n</code></pre> <p>When <code>--model</code> is omitted, it uses a built-in example model:</p> <pre><code>$ python -m effibemviewer --output viewer.html\n</code></pre>"},{"location":"usage/#Options","title":"Options","text":"Option Description <code>-m, --model PATH</code> Path to OpenStudio model file (.osm) <code>-o, --output PATH</code> Output HTML file path (default: <code>viewer.html</code>) <code>-g, --geometry-diagnostics</code> Include geometry diagnostic controls <code>--pretty</code> Pretty-print JSON in the HTML output"},{"location":"usage/#Library-Mode-Options","title":"Library Mode Options","text":"<p>By default, the CLI generates a separate <code>effibemviewer.js</code> and <code>effibemviewer.css</code> file alongside the HTML. You can change this behavior:</p> Option Description <code>--embedded</code> Inline JS/CSS directly in the HTML file <code>--cdn</code> Reference JS/CSS from jsDelivr CDN (no local files needed) <p>Note</p> <p><code>--embedded</code> and <code>--cdn</code> are mutually exclusive.</p> <p>Examples:</p> <pre><code># Generate with external local files (default)\n$ python -m effibemviewer -m model.osm -o viewer.html\n# Creates: viewer.html, effibemviewer.js, effibemviewer.css\n\n# Generate with embedded JS/CSS (single file, larger but portable)\n$ python -m effibemviewer -m model.osm -o viewer.html --embedded\n# Creates: viewer.html (self-contained)\n\n# Generate with CDN references (smallest file, requires internet)\n$ python -m effibemviewer -m model.osm -o viewer.html --cdn\n# Creates: viewer.html (loads JS/CSS from cdn.jsdelivr.net)\n</code></pre>"},{"location":"usage/#Loader-Mode","title":"Loader Mode","text":"<p>Generate an HTML page with a file input for loading local GLTF files, instead of embedding model data:</p> <pre><code>$ python -m effibemviewer --loader --output loader.html\n</code></pre> <p>This is useful for creating a standalone viewer that users can use to load their own GLTF files. No OpenStudio installation is required for loader mode.</p> <pre><code># Loader with CDN (minimal deployment - just one HTML file)\n$ python -m effibemviewer --loader --cdn --output loader.html\n</code></pre>"}]}